{"ast":null,"code":"var _jsxFileName = \"D:\\\\supermarket-app\\\\client\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { AuthContext } from './AuthContext';\nimport api from '../services/api';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cart, setCart] = useState({\n    items: [],\n    totalPrice: 0\n  });\n  const [loading, setLoading] = useState(false);\n  const {\n    isAuthenticated\n  } = useContext(AuthContext);\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchCart();\n    }\n  }, [isAuthenticated]);\n  const fetchCart = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/cart');\n      setCart(response.data.cart);\n    } catch (error) {\n      console.error('Error fetching cart:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const addToCart = async (productId, quantity = 1) => {\n    try {\n      const response = await api.post('/cart/add', {\n        productId,\n        quantity\n      });\n      setCart(response.data.cart);\n      toast.success('Product added to cart');\n      return response.data;\n    } catch (error) {\n      var _error$response, _error$response$data;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Failed to add to cart');\n      throw error;\n    }\n  };\n  const updateCartItem = async (itemId, quantity) => {\n    try {\n      const response = await api.put(`/cart/update/${itemId}`, {\n        quantity\n      });\n      setCart(response.data.cart);\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      toast.error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Failed to update cart');\n      throw error;\n    }\n  };\n  const removeFromCart = async itemId => {\n    try {\n      const response = await api.delete(`/cart/remove/${itemId}`);\n      setCart(response.data.cart);\n      toast.success('Item removed from cart');\n      return response.data;\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      toast.error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || 'Failed to remove item');\n      throw error;\n    }\n  };\n  const clearCart = async () => {\n    try {\n      const response = await api.delete('/cart/clear');\n      setCart(response.data.cart);\n      return response.data;\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      toast.error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'Failed to clear cart');\n      throw error;\n    }\n  };\n  const getCartCount = () => {\n    var _cart$items;\n    return ((_cart$items = cart.items) === null || _cart$items === void 0 ? void 0 : _cart$items.reduce((total, item) => total + item.quantity, 0)) || 0;\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      loading,\n      addToCart,\n      updateCartItem,\n      removeFromCart,\n      clearCart,\n      fetchCart,\n      getCartCount\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"lnMQF8G1WeTQtzI/MI5CnZfn2X8=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","AuthContext","api","toast","jsxDEV","_jsxDEV","CartContext","CartProvider","children","_s","cart","setCart","items","totalPrice","loading","setLoading","isAuthenticated","fetchCart","response","get","data","error","console","addToCart","productId","quantity","post","success","_error$response","_error$response$data","message","updateCartItem","itemId","put","_error$response2","_error$response2$data","removeFromCart","delete","_error$response3","_error$response3$data","clearCart","_error$response4","_error$response4$data","getCartCount","_cart$items","reduce","total","item","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/supermarket-app/client/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { AuthContext } from './AuthContext';\nimport api from '../services/api';\nimport { toast } from 'react-toastify';\n\nexport const CartContext = createContext();\n\nexport const CartProvider = ({ children }) => {\n  const [cart, setCart] = useState({ items: [], totalPrice: 0 });\n  const [loading, setLoading] = useState(false);\n  const { isAuthenticated } = useContext(AuthContext);\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchCart();\n    }\n  }, [isAuthenticated]);\n\n  const fetchCart = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/cart');\n      setCart(response.data.cart);\n    } catch (error) {\n      console.error('Error fetching cart:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const addToCart = async (productId, quantity = 1) => {\n    try {\n      const response = await api.post('/cart/add', { productId, quantity });\n      setCart(response.data.cart);\n      toast.success('Product added to cart');\n      return response.data;\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Failed to add to cart');\n      throw error;\n    }\n  };\n\n  const updateCartItem = async (itemId, quantity) => {\n    try {\n      const response = await api.put(`/cart/update/${itemId}`, { quantity });\n      setCart(response.data.cart);\n      return response.data;\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Failed to update cart');\n      throw error;\n    }\n  };\n\n  const removeFromCart = async (itemId) => {\n    try {\n      const response = await api.delete(`/cart/remove/${itemId}`);\n      setCart(response.data.cart);\n      toast.success('Item removed from cart');\n      return response.data;\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Failed to remove item');\n      throw error;\n    }\n  };\n\n  const clearCart = async () => {\n    try {\n      const response = await api.delete('/cart/clear');\n      setCart(response.data.cart);\n      return response.data;\n    } catch (error) {\n      toast.error(error.response?.data?.message || 'Failed to clear cart');\n      throw error;\n    }\n  };\n\n  const getCartCount = () => {\n    return cart.items?.reduce((total, item) => total + item.quantity, 0) || 0;\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cart,\n        loading,\n        addToCart,\n        updateCartItem,\n        removeFromCart,\n        clearCart,\n        fetchCart,\n        getCartCount,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}